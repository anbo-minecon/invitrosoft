<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - Invitrosoft</title>
    <style>
        :root {
            --green: #007832;
            --green-dark: #005c24;
            --green-light: #e8f5e9;
            --muted: #f5f7fa;
            --ink: #222;
            --border: #e0e6ed;
            --shadow: rgba(0,0,0,0.08);
            --shadow-hover: rgba(0,0,0,0.16);
            --radius: 12px;
            --danger: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --info: #3498db;
            --bg-primary: #ffffff;
            --bg-secondary: linear-gradient(135deg, #f5f7fa 0%, #e8f5e9 100%);
            --text-primary: #222;
            --text-secondary: #666;
            --card-bg: #ffffff;
        }

        body.dark-mode {
            --green: #00a844;
            --green-dark: #007832;
            --green-light: #1a3d2e;
            --muted: #1e2530;
            --ink: #e8e8e8;
            --border: #2d3748;
            --shadow: rgba(0,0,0,0.3);
            --shadow-hover: rgba(0,0,0,0.5);
            --bg-primary: #1a1f2e;
            --bg-secondary: linear-gradient(135deg, #1a1f2e 0%, #0f1419 100%);
            --text-primary: #e8e8e8;
            --text-secondary: #a0aec0;
            --card-bg: #252d3d;
            --danger: #ff6b6b;
            --success: #51cf66;
            --warning: #ffd43b;
            --info: #74c0fc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: 40px;
            transition: background 0.3s ease, color 0.3s ease;
        }

        /* Header */
        .header {
            background: var(--bg-primary);
            box-shadow: 0 2px 12px var(--shadow);
            padding: 20px 32px;
            margin-bottom: 32px;
            transition: background 0.3s ease;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: var(--green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 1.5em;
            font-weight: 800;
            color: var(--green);
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--green);
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .back-btn:hover {
            background: var(--green-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Profile Header Card */
        .profile-header {
            background: linear-gradient(135deg, var(--green) 0%, var(--green-dark) 100%);
            border-radius: 20px;
            padding: 40px;
            color: #fff;
            margin-bottom: 32px;
            box-shadow: 0 10px 40px rgba(0, 120, 50, 0.2);
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 500px;
            height: 500px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }

        .profile-header-content {
            display: flex;
            align-items: center;
            gap: 32px;
            position: relative;
            z-index: 1;
        }

        .profile-avatar-section {
            position: relative;
        }

        .profile-avatar {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: 800;
            color: #fff;
        }

        .avatar-upload-btn {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 40px;
            height: 40px;
            background: var(--green);
            border: 3px solid #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .avatar-upload-btn:hover {
            transform: scale(1.1);
            background: var(--green-dark);
        }

        .avatar-upload-input {
            display: none;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 2.2em;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .profile-role {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .profile-meta {
            display: flex;
            gap: 24px;
            margin-top: 20px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95em;
            opacity: 0.95;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: 0 2px 8px var(--shadow);
            transition: all 0.2s;
            border: 1px solid var(--border);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px var(--shadow-hover);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-icon.green { background: var(--green-light); color: var(--green); }
        .stat-icon.blue { background: #e3f2fd; color: var(--info); }
        .stat-icon.yellow { background: #fff8e1; color: var(--warning); }
        .stat-icon.red { background: #ffebee; color: var(--danger); }

        .stat-value {
            font-size: 2em;
            font-weight: 800;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }

        .content-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 28px;
            box-shadow: 0 2px 8px var(--shadow);
            border: 1px solid var(--border);
            transition: background 0.3s ease;
        }

        .card-title {
            font-size: 1.4em;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 32px;
            height: 32px;
            background: var(--green-light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--green);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.2s;
            font-family: inherit;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--green);
            box-shadow: 0 0 0 3px rgba(0, 120, 50, 0.1);
        }

        .form-input:disabled {
            background: var(--muted);
            cursor: not-allowed;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1em;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--green);
            color: #fff;
        }

        .btn-primary:hover {
            background: var(--green-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .btn-secondary {
            background: var(--muted);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .btn-danger {
            background: var(--danger);
            color: #fff;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        /* Activity List */
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px;
            background: var(--muted);
            border-radius: 8px;
            transition: all 0.2s;
        }

        body.dark-mode .activity-item:hover {
            background: #2d3748;
        }

        body:not(.dark-mode) .activity-item:hover {
            background: #e8f5e9;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .activity-icon.success { background: var(--green-light); color: var(--green); }
        .activity-icon.info { background: #e3f2fd; color: var(--info); }
        .activity-icon.warning { background: #fff8e1; color: var(--warning); }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        /* Settings Section */
        .settings-section {
            margin-bottom: 32px;
            padding-bottom: 32px;
            border-bottom: 1px solid var(--border);
        }

        .settings-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .section-title {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ccc;
            transition: 0.3s;
            border-radius: 28px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background: var(--green);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
        }

        .setting-info h4 {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .setting-info p {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        /* Notification Banner */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            max-width: 400px;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .notification.show {
            display: flex;
        }

        .notification.success { border-left: 4px solid var(--success); }
        .notification.error { border-left: 4px solid var(--danger); }
        .notification.warning { border-left: 4px solid var(--warning); }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 968px) {
            .content-grid {
                grid-template-columns: 1fr;
            }

            .profile-header-content {
                flex-direction: column;
                text-align: center;
            }

            .profile-meta {
                justify-content: center;
            }
        }

        @media (max-width: 640px) {
            .header {
                padding: 16px 20px;
            }

            .profile-header {
                padding: 24px 20px;
            }

            .profile-avatar {
                width: 100px;
                height: 100px;
            }

            .profile-name {
                font-size: 1.6em;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M12,2A1,1 0 0,1 13,3V4.5L15,4.5C15.5,4.5 16,5 16,5.5C16,6 15.5,6.5 15,6.5L13,6.5V8L19,8C20.11,8 21,8.9 21,10V19C21,20.11 20.11,21 19,21H5C3.89,21 3,20.11 3,19V10C3,8.9 3.89,8 5,8L11,8V6.5L9,6.5C8.5,6.5 8,6 8,5.5C8,5 8.5,4.5 9,4.5L11,4.5V3A1,1 0 0,1 12,2Z"/>
                    </svg>
                </div>
                <span class="logo-text">Invitrosoft</span>
            </div>
            <a href="../index.php" class="back-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                </svg>
                Volver al Panel
            </a>
        </div>
    </header>

    <div class="container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="profile-header-content">
                <div class="profile-avatar-section">
                    <div class="profile-avatar" id="profileAvatar">AB</div>
                    <label for="avatarUpload" class="avatar-upload-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                            <path d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"/>
                        </svg>
                    </label>
                    <input type="file" id="avatarUpload" class="avatar-upload-input" accept="image/*">
                </div>
                <div class="profile-info">
                    <h1 class="profile-name" id="displayName">Adanies Basilio</h1>
                    <div class="profile-role">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                        </svg>
                        Administrador del Sistema
                    </div>
                    <div class="profile-meta">
                        <div class="meta-item">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"/>
                            </svg>
                            adanies@invitrosoft.com
                        </div>
                        <div class="meta-item">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"/>
                            </svg>
                            Miembro desde 2024
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon green">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A1,1 0 0,1 13,3V4.5L15,4.5C15.5,4.5 16,5 16,5.5C16,6 15.5,6.5 15,6.5L13,6.5V8L19,8C20.11,8 21,8.9 21,10V19C21,20.11 20.11,21 19,21H5C3.89,21 3,20.11 3,19V10C3,8.9 3.89,8 5,8L11,8V6.5L9,6.5C8.5,6.5 8,6 8,5.5C8,5 8.5,4.5 9,4.5L11,4.5V3A1,1 0 0,1 12,2Z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-value"></div>
                <div class="stat-label">Formulaciones Creadas</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon blue">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-value"></div>
                <div class="stat-label">Protocolos Activos</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon yellow">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-value"></div>
                <div class="stat-label">Reactivos Registrados</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon red">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                        </svg>
                    </div>
                </div>
                <div class="stat-value"></div>
                <div class="stat-label">Horas de Actividad</div>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Main Content -->
            <div>
                <div class="content-card">
                    <h2 class="card-title">
                        <span class="card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                            </svg>
                        </span>
                        Información Personal
                    </h2>
                    <form id="profileForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Nombre</label>
                                <input type="text" class="form-input" id="firstName">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Apellido</label>
                                <input type="text" class="form-input" id="lastName">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Correo Electrónico</label>
                            <input type="email" class="form-input" id="email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Teléfono</label>
                            <input type="tel" class="form-input" id="phone">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Biografía</label>
                            <textarea class="form-input" id="bio" placeholder="Cuéntanos sobre ti..."></textarea>
                        </div>
                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                </svg>
                                Guardar Cambios
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetForm()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                                </svg>
                                Cancelar
                            </button>
                        </div>
                    </form>
                </div>

                <div class="content-card" style="margin-top: 24px;">
                    <h2 class="card-title">
                        <span class="card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z"/>
                            </svg>
                        </span>
                        Seguridad y Privacidad
                    </h2>
                    <div class="settings-section">
                        <div class="section-title">Cambiar Contraseña</div>
                        <div class="form-group">
                            <label class="form-label">Contraseña Actual</label>
                            <input type="password" class="form-input" id="currentPassword" placeholder="••••••••">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Nueva Contraseña</label>
                                <input type="password" class="form-input" id="newPassword" placeholder="••••••••">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirmar Contraseña</label>
                                <input type="password" class="form-input" id="confirmPassword" placeholder="••••••••">
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="changePassword()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                            </svg>
                            Actualizar Contraseña
                        </button>
                    </div>

                    <div class="settings-section">
                        <div class="section-title">Autenticación en Dos Pasos</div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Verificación en Dos Pasos</h4>
                                <p>Añade una capa extra de seguridad a tu cuenta</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="twoFactor">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div>
                <div class="content-card">
                    <h2 class="card-title">
                        <span class="card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3"/>
                            </svg>
                        </span>
                        Actividad Reciente
                    </h2>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon success">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Formulación creada</div>
                                <div class="activity-time">Hace 2 horas</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon info">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Perfil actualizado</div>
                                <div class="activity-time">Hace 5 horas</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon success">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Nuevo reactivo agregado</div>
                                <div class="activity-time">Hace 1 día</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon warning">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M11,6V13H13V6H11M11,15V17H13V15H11Z"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Alerta de inventario</div>
                                <div class="activity-time">Hace 2 días</div>
                            </div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon info">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Protocolo modificado</div>
                                <div class="activity-time">Hace 3 días</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card" style="margin-top: 24px;">
                    <h2 class="card-title">
                        <span class="card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                            </svg>
                        </span>
                        Preferencias
                    </h2>
                    <div class="settings-section">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Notificaciones por Email</h4>
                                <p>Recibe actualizaciones importantes</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Notificaciones Push</h4>
                                <p>Alertas en tiempo real</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Modo Oscuro</h4>
                                <p>Apariencia visual de la aplicación</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="content-card" style="margin-top: 24px;">
                    <h2 class="card-title">
                        <span class="card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                            </svg>
                        </span>
                        Zona Peligrosa
                    </h2>
                    <div class="settings-section">
                        <div class="setting-item" style="flex-direction: column; align-items: flex-start; gap: 12px;">
                            <div class="setting-info">
                                <h4>Eliminar Cuenta</h4>
                                <p>Esta acción es permanente y no se puede deshacer</p>
                            </div>
                            <button type="button" class="btn btn-danger" onclick="confirmDeleteAccount()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
                                </svg>
                                Eliminar Mi Cuenta
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Banner -->
    <div id="notification" class="notification">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
        </svg>
        <span id="notificationText"></span>
    </div>

    <script>
        // Avatar Upload
        const avatarUpload = document.getElementById('avatarUpload');
        const profileAvatar = document.getElementById('profileAvatar');

        avatarUpload.addEventListener('change', async function(e) {
            const file = e.target.files[0];
            if (file) {
                const formData = new FormData();
                formData.append('foto', file);
                const res = await fetch('subir_foto.php', { method: 'POST', body: formData });
                const data = await res.json();
                if (data.success) {
                    profileAvatar.style.backgroundImage = `url('${data.foto}')`;
                    profileAvatar.textContent = '';
                    showNotification('Foto de perfil actualizada correctamente', 'success');
                } else {
                    showNotification(data.error || 'Error al subir la imagen', 'error');
                }
            }
        });

        // Profile Form Submit
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            document.getElementById('displayName').textContent = `${firstName} ${lastName}`;
            showNotification('Perfil actualizado correctamente', 'success');
        });

        // Reset Form
        function resetForm() {
            document.getElementById('profileForm').reset();
            showNotification('Cambios descartados', 'warning');
        }

        // Change Password
        function changePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;

            if (!current || !newPass || !confirm) {
                showNotification('Por favor completa todos los campos', 'error');
                return;
            }

            if (newPass !== confirm) {
                showNotification('Las contraseñas no coinciden', 'error');
                return;
            }

            if (newPass.length < 8) {
                showNotification('La contraseña debe tener al menos 8 caracteres', 'error');
                return;
            }

            // Simular cambio de contraseña
            showNotification('Contraseña actualizada correctamente', 'success');
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        // Delete Account
        function confirmDeleteAccount() {
            if (confirm('¿Estás seguro de que deseas eliminar tu cuenta? Esta acción no se puede deshacer.')) {
                if (confirm('Esta es tu última oportunidad. ¿Realmente deseas continuar?')) {
                    showNotification('Solicitud de eliminación enviada', 'warning');
                }
            }
        }

        // Show Notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notification.className = `notification ${type}`;
            notificationText.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Two Factor Toggle
        document.getElementById('twoFactor').addEventListener('change', function() {
            if (this.checked) {
                showNotification('Autenticación en dos pasos activada', 'success');
            } else {
                showNotification('Autenticación en dos pasos desactivada', 'warning');
            }
        });

        // Dark Mode Toggle
        const darkModeToggle = document.querySelector('.setting-item:nth-child(3) input[type="checkbox"]');
        
        // Cargar preferencia guardada
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            darkModeToggle.checked = true;
        }

        darkModeToggle.addEventListener('change', function() {
            if (this.checked) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('darkMode', 'enabled');
                showNotification('Modo oscuro activado', 'success');
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('darkMode', 'disabled');
                showNotification('Modo claro activado', 'success');
            }
        });

        async function cargarPerfilYStats() {
            try {
                const res = await fetch('perfil_datos.php');
                const data = await res.json();
                if (!data.success) return;

                // DATOS PERSONALES
                const u = data.usuario;
                if (u) {
                    document.getElementById('firstName').value = u.nombre || '';
                    document.getElementById('lastName').value = u.apellido || '';
                    document.getElementById('email').value = u.email || '';
                    document.getElementById('phone').value = u.telefono || '';
                    document.getElementById('bio').value = u.bio || '';
                    document.getElementById('displayName').textContent = `${u.nombre} ${u.apellido || ''}`;
                    document.querySelector('.profile-role').innerHTML = `
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                        </svg>
                        ${u.rol}
                    `;
                    // Miembro desde
                    document.querySelectorAll('.meta-item')[1].innerHTML = `
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"/>
                        </svg>
                        Miembro desde ${u.fecha_registro ? u.fecha_registro.substring(0,4) : ''}
                    `;
                    // Email en meta
                    document.querySelectorAll('.meta-item')[0].innerHTML = `
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"/>
                        </svg>
                        ${u.email}
                    `;
                }

                // STATS
                const stats = data.stats;
                document.querySelectorAll('.stat-value')[0].textContent = stats.formulaciones;
                document.querySelectorAll('.stat-value')[1].textContent = stats.protocolos;
                document.querySelectorAll('.stat-value')[2].textContent = stats.reactivos;
                document.querySelectorAll('.stat-value')[3].textContent = stats.horas || 0;
            } catch (e) {
                // Opcional: mostrar error
                console.error(e);
            }
        }
        cargarPerfilYStats();
    </script>
</body>
</html>